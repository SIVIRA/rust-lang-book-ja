## Hello, World!

Rustをインストールしたので、最初のRustプログラムを作成しましょう。 テキスト`Hello、world`を出力する小さなプログラムを書くために新しい言語を学ぶときは伝統的です。画面に表示されるので、ここでも同じことをします！

> 注意：このマニュアルでは、コマンドラインについての基本的な知識があることを前提としています。Rustは、編集やツーリング、コードが存在する場所について特別な要求をしないので、コマンドラインの代わりに統合開発環境（IDE）を使用する場合は、好きなIDEを自由に使用してください。多くのIDEは、ある程度のRustをサポートしています。詳細は、IDEのドキュメントを参照してください。最近、Rustチームは素晴らしいIDEサポートを可能にすることに重点を置いており、その前進が急速に進んでいます！

### プロジェクトディレクトリの作成

まず、Rustコードを格納するディレクトリを作成します。 コードがどこにあるのかは問題ではありませんが、この本の演習とプロジェクトでは、ホームディレクトリに*projects*ディレクトリを作成し、そこにすべてのプロジェクトを保存することをお勧めします。

ターミナルを開き、次のコマンドを入力して、*projects*ディレクトリ内の Hello、world！の*projects*ディレクトリとディレクトリを作成します。

LinuxおよびmacOSの場合は、次のように入力します。

```text
$ mkdir ~/projects
$ cd ~/projects
$ mkdir hello_world
$ cd hello_world
```

Windows CMDの場合は、次のように入力します。

```cmd
> mkdir "%USERPROFILE%\projects"
> cd /d "%USERPROFILE%\projects"
> mkdir hello_world
> cd hello_world
```

Windows PowerShellの場合は、次のように入力します。

```powershell
> mkdir $env:USERPROFILE\projects
> cd $env:USERPROFILE\projects
> mkdir hello_world
> cd hello_world
```

### Rustプログラムの作成と実行

次に、新しいソースファイルを作成し、*main.rs*という名前にします。
Rustファイルは常に* .rs *拡張子で終わります。ファイル名に複数の単語を使用する場合は、アンダースコアを使用して単語を区切ります。たとえば、*helloworld.rs*ではなく*hello_world.rs*を使用します。

今作成した*main.rs"*ファイルを開き、リスト1-1のコードを入力します。

<span class="filename">ファイル名: main.rs</span>

```rust
fn main() {
    println!("Hello, world!");
}
```

<span class="caption">リスト 1-1: `Hello World!`を出力するプログラム</span>

ファイルを保存して、ターミナルウィンドウに戻ります。 LinuxまたはmacOSの場合は、次のコマンドを入力してファイルをコンパイルして実行します。

```text
$ rustc main.rs
$ ./main
Hello, world!
```

Windowsの場合、 `./main`の代わりに`.\main.exe`コマンドを入力してください。

```powershell
> rustc main.rs
> .\main.exe
Hello, world!
```

オペレーティングシステムにかかわらず、`Hello、world!`という文字列がターミナルに出力されるはずです。この出力が表示されない場合は、インストールのセクションの「トラブルシューティング」の部分に戻って、ヘルプを入手する方法を参照してください。

「Hello World!」が出力された場合成功です。あなたは正式にRustプログラムを書いています。これであなたはRusプログラマーです。

### Rustプログラムの解説

`Hello、world!`プログラムで何が起こったかを詳しく見てみましょう。パズルの最初の部分は次のとおりです。

```rust
fn main() {

}
```


これらの行は、Rustの関数を定義します。`main`関数は特別で、常に実行可能なすべてのRustプログラムで実行される最初のコードです。最初の行は、引数を持たず、何も返さない`main`という名前の関数を宣言しています。引数があれば、それらは`()`の中に入り ます。

また、関数本体は`{}`の中括弧で囲まれています。Rustはすべての関数本体の周りにこれらを必要とします。関数の宣言と同じ行に中かっこを配置し、宣言との間にスペースを1つ追加するのは良いスタイルです。

この執筆時点では、`rustfmt`という自動フォーマッタツールが開発中です。Rustプロジェクト全体で標準スタイルに固執したい場合、`rustfmt`はコードを特定のスタイルでフォーマットします。 Rustチームは、このツールに`rustc`のような標準のRustディストリビューションを追加する予定です。 あなたがこの本を読んだときには、コンピュータにすでにインストールされているかもしれません。詳細については、オンラインドキュメントを参照してください。

`main`関数の中には次のコードがあります。

```rust
    println!("Hello, world!");
```

この行は、この小さなプログラムのすべての作業を行います。スクリーンにテキストを出力します。ここで注意すべき4つの重要な詳細があります。

まず、Rustスタイルは、タブではなく4つのスペースでインデントすることです。

次に、`println!`はRustマクロを呼び出します。代わりに関数を呼び出すと、`println`(`!`なし)として入力されます。Rustマクロについては、第19章でより詳しく説明します。今のところ、`!`を使用することは、通常の関数の代わりにマクロを呼び出すことを意味するだけです。

３つ目はあなたは`"Hello, world!"`という文字列を見ることができます。この文字列を`println!`の引数として渡し、文字列を画面に出力します。

第4に、セミコロン(`;`)で行を終了します。これは、この式が終了し、次の式が開始する準備ができていることを示します。ほとんどの行のRustコードはセミコロンで終わります。

### コンパイルと実行は別々の手順です

新しく作成したプログラムを実行しただけなので、そのプロセスの各ステップを調べてみましょう。

Rustプログラムを実行する前に、`rustc`のコマンドの引数にソースファイルの名前を渡し、Rustコンパイラを使ってコンパイルする必要があります。

```text
$ rustc main.rs
```

CまたはC++のバックグラウンドを持っているなら、これは`gcc`や`clang`に似ていることに気付くでしょう。コンパイルが正常に終了すると、Rustはバイナリ実行可能ファイルを出力します。

LinuxおよびmacOSでは、以下のようにシェルに`ls`コマンドを入力して、実行可能ファイルを確認することができます。

```text
$ ls
main  main.rs
```

Windows上のPowerShellでは`ls`も使用できますが、3つのファイルが表示されます

```text
> ls


    Directory: Path:\to\the\project


Mode                LastWriteTime         Length Name
----                -------------         ------ ----
-a----         6/1/2018   7:31 AM         137728 main.exe
-a----         6/1/2018   7:31 AM        1454080 main.pdb
-a----         6/1/2018   7:31 AM             14 main.rs
```

WindowsでCMDを使用する場合は、次のように入力します。

```cmd
> dir /B %= the /B option says to only show the file names =%
main.exe
main.pdb
main.rs
```

これは、*.rs*拡張子を持つソースコードファイル、実行可能ファイル（Windowsでは*main.exe*、他のすべてのプラットフォームでは*main*）、およびCMDを使用する場合は拡張子*.pdb*のデバッグ情報を含むファイルを示しています。ここから*main*や*main.exe*ファイルを実行します。

```text
$ ./main # or .\main.exe on Windows
```

*main.rs*があなたの `Hello, world!`プログラムであれば、この行はターミナルに`Hello, world!`を出力します。

Ruby、Python、JavaScriptなどの動的言語に慣れている場合は、プログラムをコンパイルして別の手順として実行することに慣れていない可能性があります。Rustは*事前コンパイラ*言語です。つまり、プログラムをコンパイルして実行可能ファイルを他の人に与えることができ、Rustをインストールしなくても実行できます。誰かに*.rb*、*.py*、または*.js*ファイルを与える場合は、Ruby、Python、またはJavaScriptの実装をそれぞれインストールする必要があります。しかし、これらの言語では、プログラムをコンパイルして実行するためのコマンドが1つだけ必要です。すべてが言語デザインのトレードオフです。

`rustc`でコンパイルするのは簡単なプログラムでは問題ありませんが、プロジェクトが成長するにつれて、すべてのオプションを管理してコードを簡単に共有したいと思うでしょう。次に実際のRustプログラムを書くのに役立つCargoツールを紹介します。
